/*! For license information please see main.2afc1eb3.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),a=n(43),l=n(950);function o(e){var t="https://0472e11e-1957-4249-8e82-dff2dcf4232d.preview.emergentagent.com","/api"),zt=e=>{let{label:t,type:n="text",value:r,onChange:a,required:l=!0,options:o=null}=e;return(0,Rt.jsxs)("div",{className:"mb-4",children:[(0,Rt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t}),o?(0,Rt.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:r,onChange:a,required:l,children:[(0,Rt.jsxs)("option",{value:"",children:["Select ",t]}),o.map(((e,t)=>(0,Rt.jsx)("option",{value:e.value,children:e.label},t)))]}):(0,Rt.jsx)("input",{type:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:r,onChange:a,required:l})]})},Dt=e=>{let{tab:t,label:n,isActive:r,onClick:a}=e;return(0,Rt.jsx)("button",{className:"px-6 py-3 rounded-lg font-medium transition-colors ".concat(r?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),onClick:a,children:n})},Ft=()=>{const[e,t]=(0,a.useState)("dashboard"),[n,r]=(0,a.useState)([]),[l,o]=(0,a.useState)([]),[i,s]=(0,a.useState)([]),[u,d]=(0,a.useState)([]),[f,p]=(0,a.useState)(null),[m,h]=(0,a.useState)([]),[g,y]=(0,a.useState)([]),[b,v]=(0,a.useState)([]),[x,w]=(0,a.useState)([]),[S,k]=(0,a.useState)([]),[N,j]=(0,a.useState)(null),[_,E]=(0,a.useState)(null),[C,P]=(0,a.useState)([]),[T,O]=(0,a.useState)(null),[A,R]=(0,a.useState)(null),[L,z]=(0,a.useState)([]),[D,F]=(0,a.useState)(!1),[M,U]=(0,a.useState)(!1),[I,B]=(0,a.useState)(null),[H,q]=(0,a.useState)({}),[V,$]=(0,a.useState)(!1),[W,Q]=(0,a.useState)(1),[K]=(0,a.useState)(10),[G,X]=(0,a.useState)("customers"),[Y,J]=(0,a.useState)(1),[Z,ee]=(0,a.useState)(10),[te,ne]=(0,a.useState)(""),[re,ae]=(0,a.useState)({name:"",phone:"",email:"",address:"",company_name:"",gst_no:""}),[le,oe]=(0,a.useState)([]),[ie,se]=(0,a.useState)([]),[ue,ce]=(0,a.useState)({product_name:"",hsn_code:"",tax_group:"",sale_price:""}),[de,fe]=(0,a.useState)({customer_id:"",type:"",name:"",amount:"",amc_amount:"",start_date:"",end_date:""}),[pe,me]=(0,a.useState)({project_id:"",domain_name:"",hosting_provider:"",username:"",password:"",validity_date:"",renewal_amount:""}),[he,ge]=(0,a.useState)({customer_id:"",type:"",reference_id:"",amount:"",description:""}),[ye,be]=(0,a.useState)({new_validity_date:"",amount:"",payment_type:"client"}),ve=async()=>{try{const e=await At.get("".concat(Lt,"/customers"));r(e.data)}catch(e){console.error("Error fetching customers:",e)}},xe=async()=>{try{const e=await At.get("".concat(Lt,"/projects"));o(e.data)}catch(e){console.error("Error fetching projects:",e)}},we=async()=>{try{const e=await At.get("".concat(Lt,"/dashboard/projects"));s(e.data)}catch(e){console.error("Error fetching dashboard projects:",e)}},Se=async()=>{try{const e=await At.get("".concat(Lt,"/dashboard/expiring-domains"));d(e.data)}catch(e){console.error("Error fetching expiring domains:",e)}},ke=async()=>{try{const e=await At.get("".concat(Lt,"/domains"));y(e.data)}catch(e){console.error("Error fetching domains:",e)}},Ne=async()=>{try{const e=await At.get("".concat(Lt,"/dashboard/amc-projects"));k(e.data)}catch(e){console.error("Error fetching AMC projects:",e)}},je=async()=>{try{const e=await At.get("".concat(Lt,"/dashboard/customer-balances"));P(e.data)}catch(e){console.error("Error fetching customer balances:",e)}},_e=async()=>{try{const e=await At.get("".concat(Lt,"/dashboard/business-financial-summary"));O(e.data)}catch(e){console.error("Error fetching business financials:",e)}},Ee=async()=>{try{const e=await At.get("".concat(Lt,"/products"));oe(e.data)}catch(e){console.error("Error fetching products:",e)}},Ce=async(e,t)=>{R({id:e,name:t}),Q(1),await(async e=>{try{const t=await At.get("".concat(Lt,"/ledger/customer/").concat(e));z(t.data)}catch(t){console.error("Error fetching customer ledger:",t)}})(e),$(!0)},Pe=e=>{const t=new Date(e.validity_date),n=new Date,r=t.getTime()-n.getTime();return Math.ceil(r/864e5)<=30},Te=async()=>{try{const e=await At.get("".concat(Lt,"/domains-due-renewal"));v(e.data)}catch(e){console.error("Error fetching domains for renewal:",e)}},Oe=async()=>{try{const e=await Promise.all(n.map((async e=>{try{return(await At.get("".concat(Lt,"/customer-payment-summary/").concat(e.id))).data}catch(t){return console.error("Error fetching payment summary for ".concat(e.name,":"),t),{customer_id:e.id,customer_name:e.name,total_projects:0,total_project_amount:0,total_paid_amount:0,outstanding_amount:0,credit_balance:0,recent_payments:[]}}})));w(e)}catch(e){console.error("Error fetching customer payment summaries:",e)}};(0,a.useEffect)((()=>{ve(),xe(),we(),Se(),ke(),Te(),Ne(),je(),_e(),Ee(),(async()=>{try{const e=await At.get("".concat(Lt,"/tax-groups"));se(e.data)}catch(e){console.error("Error fetching tax groups:",e)}})()}),[]),(0,a.useEffect)((()=>{n.length>0&&Oe()}),[n]);const Ae=async e=>{e.preventDefault();try{await At.post("".concat(Lt,"/customers"),re),ae({name:"",phone:"",email:"",address:"",company_name:"",gst_no:""}),ve(),alert("Customer added successfully!")}catch(t){console.error("Error adding customer:",t),alert("Error adding customer")}},Re=async e=>{e.preventDefault();try{const e=c(c({},ue),{},{sale_price:parseFloat(ue.sale_price)});await At.post("".concat(Lt,"/products"),e),ce({product_name:"",hsn_code:"",tax_group:"",sale_price:""}),Ee(),alert("Product added successfully!")}catch(t){console.error("Error adding product:",t),alert("Error adding product")}},Le=async e=>{e.preventDefault();try{const e=c(c({},de),{},{amount:parseFloat(de.amount),amc_amount:parseFloat(de.amc_amount)||0});de.end_date&&""!==de.end_date.trim()?e.end_date=de.end_date:e.end_date=null,await At.post("".concat(Lt,"/projects"),e),fe({customer_id:"",type:"",name:"",amount:"",amc_amount:"",start_date:"",end_date:""}),xe(),we(),_e(),alert("Project added successfully!")}catch(t){console.error("Error adding project:",t),alert("Error adding project")}},ze=async e=>{e.preventDefault();try{await At.post("".concat(Lt,"/domains"),pe),me({project_id:"",domain_name:"",hosting_provider:"",username:"",password:"",validity_date:"",renewal_amount:""}),we(),Se(),ke(),f&&(async e=>{try{const t=await At.get("".concat(Lt,"/domains/project/").concat(e));h(t.data)}catch(t){console.error("Error fetching project domains:",t)}})(f),alert("Domain/Hosting added successfully!")}catch(t){console.error("Error adding domain:",t),alert("Error adding domain")}},De=async e=>{e.preventDefault();try{await At.post("".concat(Lt,"/payments"),he),ge({customer_id:"",type:"",reference_id:"",amount:"",description:""}),F(!1),xe(),we(),je(),Oe(),_e(),alert("Payment recorded successfully!")}catch(t){console.error("Error recording payment:",t),alert("Error recording payment")}},Fe=async e=>{e.preventDefault();try{await At.post("".concat(Lt,"/domain-renewal/").concat(I.id),ye),be({new_validity_date:"",amount:"",payment_type:"client"}),U(!1),B(null),ke(),we(),Se(),je(),alert("Domain renewed successfully!")}catch(t){console.error("Error renewing domain:",t),alert("Error renewing domain")}},Me=(e,t,n,r)=>{ge({customer_id:e,type:t,reference_id:n,amount:"",description:r}),F(!0)},Ue=async e=>{e.preventDefault();try{if("customer"===_)await At.put("".concat(Lt,"/customers/").concat(N.id),N),ve(),we();else if("project"===_){const e=c(c({},N),{},{amount:parseFloat(N.amount),amc_amount:parseFloat(N.amc_amount)||0});N.end_date&&""!==N.end_date.trim()?e.end_date=N.end_date:e.end_date=null,await At.put("".concat(Lt,"/projects/").concat(N.id),e),xe(),we(),Ne()}else if("domain"===_)await At.put("".concat(Lt,"/domains/").concat(N.id),N),ke(),we(),Se();else if("product"===_){const e=c(c({},N),{},{sale_price:parseFloat(N.sale_price)});await At.put("".concat(Lt,"/products/").concat(N.id),e),Ee()}j(null),E(null),alert("Updated successfully!")}catch(t){console.error("Error updating:",t),alert("Error updating")}},Ie=()=>{j(null),E(null)},Be=e=>{J(e)},He=e=>{ee(e),J(1)},qe=e=>{X(e),J(1),ne("")},Ve=e=>{let{currentPage:t,totalPages:n,onPageChange:r,totalItems:a,pageSize:l,onPageSizeChange:o}=e;return(0,Rt.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 space-y-4 sm:space-y-0",children:[(0,Rt.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Rt.jsxs)("span",{className:"text-sm text-gray-700",children:["Showing ","all"===l?a:Math.min(l,a)," of ",a," results"]}),(0,Rt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rt.jsx)("label",{className:"text-sm text-gray-700",children:"Show:"}),(0,Rt.jsxs)("select",{value:l,onChange:e=>o("all"===e.target.value?"all":parseInt(e.target.value)),className:"px-2 py-1 border border-gray-300 rounded-md text-sm",children:[(0,Rt.jsx)("option",{value:10,children:"10"}),(0,Rt.jsx)("option",{value:50,children:"50"}),(0,Rt.jsx)("option",{value:100,children:"100"}),(0,Rt.jsx)("option",{value:500,children:"500"}),(0,Rt.jsx)("option",{value:1e3,children:"1000"}),(0,Rt.jsx)("option",{value:"all",children:"All"})]})]})]}),"all"!==l&&n>1&&(0,Rt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rt.jsx)("button",{onClick:()=>r(t-1),disabled:1===t,className:"px-3 py-1 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,Rt.jsx)("div",{className:"flex space-x-1",children:Array.from({length:Math.min(5,n)},((e,a)=>{let l;return l=n<=5||t<=3?a+1:t>=n-2?n-4+a:t-2+a,(0,Rt.jsx)("button",{onClick:()=>r(l),className:"px-3 py-1 rounded-md ".concat(t===l?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:l},l)}))}),(0,Rt.jsx)("button",{onClick:()=>r(t+1),disabled:t===n,className:"px-3 py-1 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})};return(0,Rt.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,Rt.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,Rt.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Agency Management System"}),(0,Rt.jsxs)("div",{className:"flex flex-wrap gap-4 mb-8",children:[(0,Rt.jsx)(Dt,{tab:"dashboard",label:"Dashboard",isActive:"dashboard"===e,onClick:()=>t("dashboard")}),(0,Rt.jsx)(Dt,{tab:"customers",label:"Add Customer",isActive:"customers"===e,onClick:()=>t("customers")}),(0,Rt.jsx)(Dt,{tab:"projects",label:"Add Project",isActive:"projects"===e,onClick:()=>t("projects")}),(0,Rt.jsx)(Dt,{tab:"domains",label:"Add Domain/Hosting",isActive:"domains"===e,onClick:()=>t("domains")}),(0,Rt.jsx)(Dt,{tab:"products",label:"Product Master",isActive:"products"===e,onClick:()=>t("products")}),(0,Rt.jsx)(Dt,{tab:"reports",label:"Reports",isActive:"reports"===e,onClick:()=>t("reports")}),(0,Rt.jsx)(Dt,{tab:"amc",label:"AMC Tracker",isActive:"amc"===e,onClick:()=>t("amc")}),(0,Rt.jsx)(Dt,{tab:"ledger",label:"Customer Ledger",isActive:"ledger"===e,onClick:()=>t("ledger")})]}),"dashboard"===e&&(0,Rt.jsx)("div",{className:"space-y-6",children:(0,Rt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rt.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Business Dashboard"}),(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,Rt.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,Rt.jsx)("h3",{className:"text-lg font-semibold text-blue-800",children:"Total Customers"}),(0,Rt.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:n.length})]}),(0,Rt.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,Rt.jsx)("h3",{className:"text-lg font-semibold text-green-800",children:"Total Projects"}),(0,Rt.jsx)("p",{className:"text-3xl font-bold text-green-600",children:l.length})]}),(0,Rt.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,Rt.jsx)("h3",{className:"text-lg font-semibold text-red-800",children:"Expiring Domains"}),(0,Rt.jsx)("p",{className:"text-3xl font-bold text-red-600",children:u.length})]}),(0,Rt.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,Rt.jsx)("h3",{className:"text-lg font-semibold text-purple-800",children:"AMC Due"}),(0,Rt.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:S.length})]})]}),T&&(0,Rt.jsxs)("div",{className:"mb-6",children:[(0,Rt.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"\ud83d\udcb0 Financial Summary"}),(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[(0,Rt.jsxs)("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-200",children:[(0,Rt.jsx)("h4",{className:"text-sm font-semibold text-emerald-800",children:"Total Project Value"}),(0,Rt.jsxs)("p",{className:"text-2xl font-bold text-emerald-600",children:["\u20b9",T.total_project_value.toLocaleString()]})]}),(0,Rt.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[(0,Rt.jsx)("h4",{className:"text-sm font-semibold text-green-800",children:"Total Received"}),(0,Rt.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["\u20b9",T.total_received.toLocaleString()]}),(0,Rt.jsxs)("p",{className:"text-xs text-green-700",children:[T.payment_collection_rate,"% collection rate"]})]}),(0,Rt.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[(0,Rt.jsx)("h4",{className:"text-sm font-semibold text-orange-800",children:"Outstanding Amount"}),(0,Rt.jsxs)("p",{className:"text-2xl font-bold text-orange-600",children:["\u20b9",T.total_outstanding.toLocaleString()]})]}),(0,Rt.jsxs)("div",{className:"bg-cyan-50 p-4 rounded-lg border border-cyan-200",children:[(0,Rt.jsx)("h4",{className:"text-sm font-semibold text-cyan-800",children:"Customer Credit"}),(0,Rt.jsxs)("p",{className:"text-2xl font-bold text-cyan-600",children:["\u20b9",T.total_customer_credit.toLocaleString()]})]})]}),(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rt.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-lg border border-indigo-200",children:[(0,Rt.jsx)("h4",{className:"text-lg font-semibold text-indigo-800",children:"Net Revenue"}),(0,Rt.jsxs)("p",{className:"text-3xl font-bold text-indigo-600",children:["\u20b9",T.net_revenue.toLocaleString()]}),(0,Rt.jsx)("p",{className:"text-sm text-indigo-700",children:"Total received + customer credits"})]}),(0,Rt.jsxs)("div",{className:"bg-teal-50 p-4 rounded-lg border border-teal-200",children:[(0,Rt.jsx)("h4",{className:"text-lg font-semibold text-teal-800",children:"Project Completion"}),(0,Rt.jsxs)("p",{className:"text-3xl font-bold text-teal-600",children:[T.project_completion_rate,"%"]}),(0,Rt.jsx)("p",{className:"text-sm text-teal-700",children:"Revenue collected vs total project value"})]})]})]}),T&&T.top_customers&&T.top_customers.length>0&&(0,Rt.jsxs)("div",{className:"mb-6",children:[(0,Rt.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"\ud83c\udfc6 Top Customers by Project Value"}),(0,Rt.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,Rt.jsx)("div",{className:"space-y-2",children:T.top_customers.map(((e,t)=>(0,Rt.jsxs)("div",{className:"flex justify-between items-center py-2 px-3 bg-white rounded border",children:[(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("span",{className:"font-medium",children:e.customer_name}),(0,Rt.jsxs)("span",{className:"text-sm text-gray-600 ml-2",children:["(",e.project_count," projects)"]})]}),(0,Rt.jsxs)("span",{className:"font-bold text-green-600",children:["\u20b9",e.total_amount.toLocaleString()]})]},t)))})})]}),u.length>0&&(0,Rt.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[(0,Rt.jsx)("h3",{className:"text-lg font-semibold text-red-800 mb-3",children:"\u26a0\ufe0f Domains Expiring Soon"}),(0,Rt.jsx)("div",{className:"space-y-2",children:u.map(((e,t)=>(0,Rt.jsx)("div",{className:"bg-white p-3 rounded border",children:(0,Rt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"font-medium",children:e.domain_name}),(0,Rt.jsxs)("p",{className:"text-sm text-gray-600",children:[e.customer_name," - ",e.project_name]})]}),(0,Rt.jsxs)("div",{className:"text-right",children:[(0,Rt.jsxs)("p",{className:"text-sm text-red-600 font-medium",children:["Expires: ",new Date(e.validity_date).toLocaleDateString()]}),(0,Rt.jsxs)("p",{className:"text-xs text-red-500",children:[e.days_remaining," days remaining"]})]})]})},t)))})]}),(0,Rt.jsxs)("div",{className:"overflow-x-auto",children:[(0,Rt.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"\ud83d\udcca Recent Projects"}),(0,Rt.jsxs)("table",{className:"w-full table-auto",children:[(0,Rt.jsx)("thead",{children:(0,Rt.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Customer"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Project"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Type"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Amount"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Duration"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Domains"})]})}),(0,Rt.jsx)("tbody",{children:i.map((e=>(0,Rt.jsxs)("tr",{className:"border-b",children:[(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"font-medium",children:e.customer_name}),(0,Rt.jsx)("p",{className:"text-sm text-gray-600",children:e.customer_email})]})}),(0,Rt.jsx)("td",{className:"px-4 py-2 font-medium",children:e.name}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:e.type}),(0,Rt.jsxs)("td",{className:"px-4 py-2",children:["\u20b9",e.amount.toLocaleString()]}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsxs)("div",{className:"text-sm",children:[(0,Rt.jsx)("p",{children:new Date(e.start_date).toLocaleDateString()}),(0,Rt.jsx)("p",{children:new Date(e.end_date).toLocaleDateString()})]})}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsx)("div",{className:"space-y-1",children:e.domains.map(((e,t)=>(0,Rt.jsxs)("div",{className:"text-sm",children:[(0,Rt.jsx)("p",{className:"font-medium",children:e.domain_name}),(0,Rt.jsx)("p",{className:"text-gray-600",children:e.hosting_provider})]},t)))})})]},e.id)))})]})]})]})}),"customers"===e&&(0,Rt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rt.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Add New Customer"}),(0,Rt.jsxs)("form",{onSubmit:Ae,className:"space-y-4",children:[(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rt.jsx)(zt,{label:"Customer Name",value:re.name,onChange:e=>ae(c(c({},re),{},{name:e.target.value}))}),(0,Rt.jsx)(zt,{label:"Company Name",value:re.company_name,onChange:e=>ae(c(c({},re),{},{company_name:e.target.value})),required:!1}),(0,Rt.jsx)(zt,{label:"Phone Number",type:"tel",value:re.phone,onChange:e=>ae(c(c({},re),{},{phone:e.target.value}))}),(0,Rt.jsx)(zt,{label:"Email Address",type:"email",value:re.email,onChange:e=>ae(c(c({},re),{},{email:e.target.value}))}),(0,Rt.jsx)(zt,{label:"GST Number",value:re.gst_no,onChange:e=>ae(c(c({},re),{},{gst_no:e.target.value})),required:!1}),(0,Rt.jsx)(zt,{label:"Address",value:re.address,onChange:e=>ae(c(c({},re),{},{address:e.target.value}))})]}),(0,Rt.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Add Customer"})]})]}),"projects"===e&&(0,Rt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rt.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Add New Project"}),(0,Rt.jsxs)("form",{onSubmit:Le,className:"space-y-4",children:[(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rt.jsx)(zt,{label:"Customer",value:de.customer_id,onChange:e=>fe(c(c({},de),{},{customer_id:e.target.value})),options:n.map((e=>({value:e.id,label:"".concat(e.name," - ").concat(e.email)})))}),(0,Rt.jsx)(zt,{label:"Project Type",value:de.type,onChange:e=>fe(c(c({},de),{},{type:e.target.value}))}),(0,Rt.jsx)(zt,{label:"Project Name",value:de.name,onChange:e=>fe(c(c({},de),{},{name:e.target.value}))}),(0,Rt.jsx)(zt,{label:"Project Amount",type:"number",value:de.amount,onChange:e=>fe(c(c({},de),{},{amount:e.target.value}))}),(0,Rt.jsx)(zt,{label:"AMC Amount",type:"number",value:de.amc_amount,onChange:e=>fe(c(c({},de),{},{amc_amount:e.target.value})),required:!1}),(0,Rt.jsx)(zt,{label:"Start Date",type:"date",value:de.start_date,onChange:e=>fe(c(c({},de),{},{start_date:e.target.value}))}),(0,Rt.jsx)(zt,{label:"End Date",type:"date",value:de.end_date,onChange:e=>fe(c(c({},de),{},{end_date:e.target.value})),required:!1})]}),(0,Rt.jsx)("button",{type:"submit",className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition-colors",children:"Add Project"})]})]}),"domains"===e&&(0,Rt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rt.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Add Domain/Hosting"}),(0,Rt.jsxs)("form",{onSubmit:ze,className:"space-y-4",children:[(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rt.jsx)(zt,{label:"Project",value:pe.project_id,onChange:e=>me(c(c({},pe),{},{project_id:e.target.value})),options:l.map((e=>({value:e.id,label:"".concat(e.name," - ").concat(e.type)})))}),(0,Rt.jsx)(zt,{label:"Domain Name",value:pe.domain_name,onChange:e=>me(c(c({},pe),{},{domain_name:e.target.value}))}),(0,Rt.jsx)(zt,{label:"Hosting Provider",value:pe.hosting_provider,onChange:e=>me(c(c({},pe),{},{hosting_provider:e.target.value}))}),(0,Rt.jsx)(zt,{label:"Username",value:pe.username,onChange:e=>me(c(c({},pe),{},{username:e.target.value}))}),(0,Rt.jsx)(zt,{label:"Password",type:"password",value:pe.password,onChange:e=>me(c(c({},pe),{},{password:e.target.value}))}),(0,Rt.jsx)(zt,{label:"Validity Date",type:"date",value:pe.validity_date,onChange:e=>me(c(c({},pe),{},{validity_date:e.target.value}))}),(0,Rt.jsx)(zt,{label:"Renewal Amount",type:"number",value:pe.renewal_amount,onChange:e=>me(c(c({},pe),{},{renewal_amount:e.target.value})),required:!1})]}),(0,Rt.jsx)("button",{type:"submit",className:"w-full bg-purple-600 text-white py-2 px-4 rounded-md hover:bg-purple-700 transition-colors",children:"Add Domain/Hosting"})]})]}),"products"===e&&(0,Rt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rt.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Product Master"}),(0,Rt.jsxs)("form",{onSubmit:Re,className:"space-y-4 mb-8",children:[(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rt.jsx)(zt,{label:"Product Name",value:ue.product_name,onChange:e=>ce(c(c({},ue),{},{product_name:e.target.value}))}),(0,Rt.jsx)(zt,{label:"HSN Code",value:ue.hsn_code,onChange:e=>ce(c(c({},ue),{},{hsn_code:e.target.value}))}),(0,Rt.jsx)(zt,{label:"Tax Group",value:ue.tax_group,onChange:e=>ce(c(c({},ue),{},{tax_group:e.target.value})),options:ie.map((e=>({value:e.value,label:e.label})))}),(0,Rt.jsx)(zt,{label:"Sale Price (\u20b9)",type:"number",step:"0.01",value:ue.sale_price,onChange:e=>ce(c(c({},ue),{},{sale_price:e.target.value}))})]}),(0,Rt.jsx)("button",{type:"submit",className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition-colors",children:"Add Product"})]}),(0,Rt.jsxs)("div",{className:"border-t pt-6",children:[(0,Rt.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"All Products"}),le.length>0?(0,Rt.jsx)("div",{className:"overflow-x-auto",children:(0,Rt.jsxs)("table",{className:"w-full table-auto",children:[(0,Rt.jsx)("thead",{children:(0,Rt.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Product Name"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"HSN Code"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Tax Group"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Tax %"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Sale Price"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Actions"})]})}),(0,Rt.jsx)("tbody",{children:le.map(((e,t)=>(0,Rt.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[(0,Rt.jsx)("td",{className:"px-4 py-2",children:e.product_name}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:e.hsn_code}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:e.tax_group}),(0,Rt.jsxs)("td",{className:"px-4 py-2",children:[e.tax_percentage,"%"]}),(0,Rt.jsxs)("td",{className:"px-4 py-2",children:["\u20b9",e.sale_price]}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsxs)("div",{className:"flex space-x-2",children:[(0,Rt.jsx)("button",{onClick:()=>{j(e),E("product")},className:"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600",children:"Edit"}),(0,Rt.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this product?"))try{await At.delete("".concat(Lt,"/products/").concat(e)),Ee(),alert("Product deleted successfully!")}catch(t){console.error("Error deleting product:",t),alert("Error deleting product")}})(e.id),className:"bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600",children:"Delete"})]})})]},e.id)))})]})}):(0,Rt.jsx)("p",{className:"text-gray-500",children:"No products found. Add a product to get started."})]})]}),"reports"===e&&(()=>{let e=[];"customers"===G?e=n:"projects"===G?e=l:"domains"===G?e=g:"renewals"===G?e=b:"payments"===G&&(e=x);const t=((e,t)=>t?e.filter((e=>Object.values(e).some((e=>e.toString().toLowerCase().includes(t.toLowerCase()))))):e)(e,te),r=((e,t,n)=>{if("all"===n)return e;const r=(t-1)*n,a=r+n;return e.slice(r,a)})(t,Y,Z),a=((e,t)=>"all"===t?1:Math.ceil(e/t))(t.length,Z);return(0,Rt.jsxs)("div",{className:"space-y-6",children:[D&&(0,Rt.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,Rt.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,Rt.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Record Payment"}),(0,Rt.jsxs)("form",{onSubmit:De,className:"space-y-4",children:[(0,Rt.jsx)(zt,{label:"Amount",type:"number",value:he.amount,onChange:e=>ge(c(c({},he),{},{amount:e.target.value}))}),(0,Rt.jsx)(zt,{label:"Description",value:he.description,onChange:e=>ge(c(c({},he),{},{description:e.target.value}))}),(0,Rt.jsxs)("div",{className:"flex gap-2",children:[(0,Rt.jsx)("button",{type:"submit",className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700",children:"Record Payment"}),(0,Rt.jsx)("button",{type:"button",onClick:()=>F(!1),className:"flex-1 bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700",children:"Cancel"})]})]})]})}),M&&(0,Rt.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,Rt.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,Rt.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Renew Domain: ",null===I||void 0===I?void 0:I.domain_name]}),(0,Rt.jsxs)("form",{onSubmit:Fe,className:"space-y-4",children:[(0,Rt.jsx)(zt,{label:"New Validity Date",type:"date",value:ye.new_validity_date,onChange:e=>be(c(c({},ye),{},{new_validity_date:e.target.value}))}),(0,Rt.jsx)(zt,{label:"Renewal Amount",type:"number",value:ye.amount,onChange:e=>be(c(c({},ye),{},{amount:e.target.value}))}),(0,Rt.jsx)(zt,{label:"Payment Type",value:ye.payment_type,onChange:e=>be(c(c({},ye),{},{payment_type:e.target.value})),options:[{value:"client",label:"Client Paid"},{value:"agency",label:"Agency Paid (Add to Customer Credit)"}]}),(0,Rt.jsxs)("div",{className:"flex gap-2",children:[(0,Rt.jsx)("button",{type:"submit",className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700",children:"Renew Domain"}),(0,Rt.jsx)("button",{type:"button",onClick:()=>{U(!1),B(null)},className:"flex-1 bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700",children:"Cancel"})]})]})]})}),N&&(0,Rt.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,Rt.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,Rt.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Edit ",_]}),(0,Rt.jsxs)("form",{onSubmit:Ue,className:"space-y-4",children:["customer"===_&&(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)(zt,{label:"Name",value:N.name,onChange:e=>j(c(c({},N),{},{name:e.target.value}))}),(0,Rt.jsx)(zt,{label:"Phone",value:N.phone,onChange:e=>j(c(c({},N),{},{phone:e.target.value}))}),(0,Rt.jsx)(zt,{label:"Email",value:N.email,onChange:e=>j(c(c({},N),{},{email:e.target.value}))}),(0,Rt.jsx)(zt,{label:"Address",value:N.address,onChange:e=>j(c(c({},N),{},{address:e.target.value}))})]}),"project"===_&&(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)(zt,{label:"Type",value:N.type,onChange:e=>j(c(c({},N),{},{type:e.target.value}))}),(0,Rt.jsx)(zt,{label:"Name",value:N.name,onChange:e=>j(c(c({},N),{},{name:e.target.value}))}),(0,Rt.jsx)(zt,{label:"Amount",type:"number",value:N.amount,onChange:e=>j(c(c({},N),{},{amount:e.target.value}))}),(0,Rt.jsx)(zt,{label:"AMC Amount",type:"number",value:N.amc_amount||"",onChange:e=>j(c(c({},N),{},{amc_amount:e.target.value})),required:!1}),(0,Rt.jsx)(zt,{label:"Start Date",type:"date",value:N.start_date,onChange:e=>j(c(c({},N),{},{start_date:e.target.value}))}),(0,Rt.jsx)(zt,{label:"End Date",type:"date",value:N.end_date||"",onChange:e=>j(c(c({},N),{},{end_date:e.target.value})),required:!1})]}),"domain"===_&&(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)(zt,{label:"Domain Name",value:N.domain_name,onChange:e=>j(c(c({},N),{},{domain_name:e.target.value}))}),(0,Rt.jsx)(zt,{label:"Hosting Provider",value:N.hosting_provider,onChange:e=>j(c(c({},N),{},{hosting_provider:e.target.value}))}),(0,Rt.jsx)(zt,{label:"Username",value:N.username,onChange:e=>j(c(c({},N),{},{username:e.target.value}))}),(0,Rt.jsx)(zt,{label:"Password",type:"password",value:N.password,onChange:e=>j(c(c({},N),{},{password:e.target.value}))}),(0,Rt.jsx)(zt,{label:"Validity Date",type:"date",value:N.validity_date,onChange:e=>j(c(c({},N),{},{validity_date:e.target.value}))})]}),"product"===_&&(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)(zt,{label:"Product Name",value:N.product_name,onChange:e=>j(c(c({},N),{},{product_name:e.target.value}))}),(0,Rt.jsx)(zt,{label:"HSN Code",value:N.hsn_code,onChange:e=>j(c(c({},N),{},{hsn_code:e.target.value}))}),(0,Rt.jsx)(zt,{label:"Tax Group",value:N.tax_group,onChange:e=>j(c(c({},N),{},{tax_group:e.target.value})),options:ie.map((e=>({value:e.value,label:e.label})))}),(0,Rt.jsx)(zt,{label:"Sale Price (\u20b9)",type:"number",step:"0.01",value:N.sale_price,onChange:e=>j(c(c({},N),{},{sale_price:e.target.value}))})]}),(0,Rt.jsxs)("div",{className:"flex gap-2",children:[(0,Rt.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700",children:"Save"}),(0,Rt.jsx)("button",{type:"button",onClick:Ie,className:"flex-1 bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700",children:"Cancel"})]})]})]})}),(0,Rt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rt.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[(0,Rt.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4 sm:mb-0",children:"Reports"}),(0,Rt.jsx)("div",{className:"w-full sm:w-auto",children:(0,Rt.jsx)("input",{type:"text",placeholder:"Search...",value:te,onChange:e=>{return t=e.target.value,ne(t),void J(1);var t},className:"w-full sm:w-64 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})})]}),(0,Rt.jsxs)("div",{className:"flex flex-wrap gap-2 mb-6",children:[(0,Rt.jsxs)("button",{onClick:()=>qe("customers"),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("customers"===G?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:["Customers (",n.length,")"]}),(0,Rt.jsxs)("button",{onClick:()=>qe("projects"),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("projects"===G?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:["Projects (",l.length,")"]}),(0,Rt.jsxs)("button",{onClick:()=>qe("domains"),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("domains"===G?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:["Domains (",g.length,")"]}),(0,Rt.jsxs)("button",{onClick:()=>qe("renewals"),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("renewals"===G?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:["Domain Renewals (",b.length,")"]}),(0,Rt.jsx)("button",{onClick:()=>qe("payments"),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("payments"===G?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Customer Payments"})]}),(0,Rt.jsxs)("div",{className:"overflow-x-auto",children:["customers"===G&&(0,Rt.jsxs)("table",{className:"w-full table-auto",children:[(0,Rt.jsx)("thead",{children:(0,Rt.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Name"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Email"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Phone"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Address"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Actions"})]})}),(0,Rt.jsx)("tbody",{children:r.map((e=>(0,Rt.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,Rt.jsx)("td",{className:"px-4 py-2 font-medium",children:e.name}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:e.email}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:e.phone}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:e.address}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsxs)("div",{className:"flex space-x-2",children:[(0,Rt.jsx)("button",{onClick:()=>{j(e),E("customer")},className:"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600",children:"Edit"}),(0,Rt.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this customer?"))try{await At.delete("".concat(Lt,"/customers/").concat(e)),ve(),we(),alert("Customer deleted successfully!")}catch(t){console.error("Error deleting customer:",t),alert("Error deleting customer")}})(e.id),className:"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600",children:"Delete"})]})})]},e.id)))})]}),"projects"===G&&(0,Rt.jsxs)("table",{className:"w-full table-auto",children:[(0,Rt.jsx)("thead",{children:(0,Rt.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Project Name"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Type"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Amount"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Paid"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Status"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Start Date"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"End Date"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Actions"})]})}),(0,Rt.jsx)("tbody",{children:r.map((e=>(0,Rt.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,Rt.jsx)("td",{className:"px-4 py-2 font-medium",children:e.name}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:e.type}),(0,Rt.jsxs)("td",{className:"px-4 py-2",children:["\u20b9",e.amount.toLocaleString()]}),(0,Rt.jsxs)("td",{className:"px-4 py-2",children:["\u20b9",(e.paid_amount||0).toLocaleString()]}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("paid"===e.payment_status?"bg-green-100 text-green-800":"partial"===e.payment_status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.payment_status||"pending"})}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:new Date(e.start_date).toLocaleDateString()}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:e.end_date?new Date(e.end_date).toLocaleDateString():"Not set"}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsxs)("div",{className:"flex space-x-2",children:[(0,Rt.jsx)("button",{onClick:()=>{j(e),E("project")},className:"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600",children:"Edit"}),(0,Rt.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this project?"))try{await At.delete("".concat(Lt,"/projects/").concat(e)),xe(),we(),Ne(),alert("Project deleted successfully!")}catch(t){console.error("Error deleting project:",t),alert("Error deleting project")}})(e.id),className:"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600",children:"Delete"}),"paid"!==e.payment_status&&(0,Rt.jsx)("button",{onClick:()=>Me(e.customer_id,"project_advance",e.id,"Payment for ".concat(e.name)),className:"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600",children:"Add Payment"})]})})]},e.id)))})]}),"domains"===G&&(0,Rt.jsxs)("table",{className:"w-full table-auto",children:[(0,Rt.jsx)("thead",{children:(0,Rt.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Domain Name"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Hosting Provider"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Username"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Password"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Validity Date"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Renewal Amount"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Status"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Actions"})]})}),(0,Rt.jsx)("tbody",{children:r.map((e=>(0,Rt.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,Rt.jsx)("td",{className:"px-4 py-2 font-medium",children:e.domain_name}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:e.hosting_provider}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:e.username}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rt.jsx)("span",{className:"font-mono",children:H[e.id]?e.password:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),(0,Rt.jsx)("button",{onClick:()=>{return t=e.id,void q((e=>c(c({},e),{},{[t]:!e[t]})));var t},className:"text-blue-500 hover:text-blue-700 text-sm",title:H[e.id]?"Hide password":"Show password",children:H[e.id]?"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f":"\ud83d\udc41\ufe0f"})]})}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:new Date(e.validity_date).toLocaleDateString()}),(0,Rt.jsxs)("td",{className:"px-4 py-2",children:["\u20b9",(e.renewal_amount||0).toLocaleString()]}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("renewed"===e.renewal_status?"bg-green-100 text-green-800":"due"===e.renewal_status?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:e.renewal_status||"active"})}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsxs)("div",{className:"flex space-x-2",children:[(0,Rt.jsx)("button",{onClick:()=>{j(e),E("domain")},className:"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600",children:"Edit"}),(0,Rt.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this domain?"))try{await At.delete("".concat(Lt,"/domains/").concat(e)),ke(),we(),Se(),alert("Domain deleted successfully!")}catch(t){console.error("Error deleting domain:",t),alert("Error deleting domain")}})(e.id),className:"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600",children:"Delete"}),Pe(e)?(0,Rt.jsx)("button",{onClick:()=>(e=>{B(e),U(!0)})(e),className:"bg-green-500 text-white px-2 py-1 rounded text-sm hover:bg-green-600",children:"Renew"}):(0,Rt.jsx)("button",{disabled:!0,className:"bg-gray-400 text-white px-2 py-1 rounded text-sm cursor-not-allowed opacity-50",title:"Domain renewal available only within 30 days of expiry",children:"Renew"})]})})]},e.id)))})]}),"renewals"===G&&(0,Rt.jsxs)("table",{className:"w-full table-auto",children:[(0,Rt.jsx)("thead",{children:(0,Rt.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Domain Name"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Customer"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Project"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Validity Date"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Days Until Expiry"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Renewal Amount"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Status"})]})}),(0,Rt.jsx)("tbody",{children:r.map((e=>(0,Rt.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,Rt.jsx)("td",{className:"px-4 py-2 font-medium",children:e.domain_name}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:e.customer_name}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:e.project_name}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:new Date(e.validity_date).toLocaleDateString()}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(e.is_expired?"bg-red-100 text-red-800":e.days_until_expiry<=7?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"),children:e.is_expired?"EXPIRED":"".concat(e.days_until_expiry," days")})}),(0,Rt.jsxs)("td",{className:"px-4 py-2",children:["\u20b9",(e.renewal_amount||0).toLocaleString()]}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(e.is_expired?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:e.is_expired?"Needs Renewal":"Due Soon"})})]},e.domain_id)))})]}),"payments"===G&&(0,Rt.jsxs)("table",{className:"w-full table-auto",children:[(0,Rt.jsx)("thead",{children:(0,Rt.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Customer"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Projects"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Total Amount"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Paid Amount"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Outstanding"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Credit Balance"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Actions"})]})}),(0,Rt.jsx)("tbody",{children:r.map((e=>(0,Rt.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,Rt.jsx)("td",{className:"px-4 py-2 font-medium",children:e.customer_name}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:e.total_projects}),(0,Rt.jsxs)("td",{className:"px-4 py-2",children:["\u20b9",(e.total_project_amount||0).toLocaleString()]}),(0,Rt.jsxs)("td",{className:"px-4 py-2 text-green-600",children:["\u20b9",(e.total_paid_amount||0).toLocaleString()]}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsxs)("span",{className:"font-medium ".concat((e.outstanding_amount||0)>0?"text-red-600":"text-gray-600"),children:["\u20b9",(e.outstanding_amount||0).toLocaleString()]})}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsxs)("span",{className:"font-medium ".concat((e.credit_balance||0)<0?"text-red-600":e.credit_balance>0?"text-green-600":"text-gray-600"),children:["\u20b9",(e.credit_balance||0).toLocaleString()]})}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsxs)("div",{className:"flex space-x-2",children:[(0,Rt.jsx)("button",{onClick:()=>Ce(e.customer_id,e.customer_name),className:"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600",children:"View Ledger"}),(0,Rt.jsx)("button",{onClick:()=>Me(e.customer_id,"project_advance","","Payment for ".concat(e.customer_name)),className:"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600",children:"Add Payment"})]})})]},e.customer_id)))})]})]}),0===r.length&&(0,Rt.jsx)("div",{className:"text-center py-8",children:(0,Rt.jsx)("p",{className:"text-gray-500",children:te?"No results found for your search.":"No ".concat(G," found.")})}),(0,Rt.jsx)(Ve,{currentPage:Y,totalPages:a,onPageChange:Be,totalItems:t.length,pageSize:Z,onPageSizeChange:He})]})]})})(),"amc"===e&&(0,Rt.jsx)("div",{className:"space-y-6",children:(0,Rt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rt.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"AMC (Annual Maintenance Contract) Tracker"}),(0,Rt.jsx)("p",{className:"text-gray-600 mb-6",children:"This section shows projects that are due for AMC renewal (1 year after project completion)"}),(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,Rt.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,Rt.jsx)("h3",{className:"text-lg font-semibold text-blue-800",children:"Total AMC Due"}),(0,Rt.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:S.length})]}),(0,Rt.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,Rt.jsx)("h3",{className:"text-lg font-semibold text-red-800",children:"Overdue AMC"}),(0,Rt.jsx)("p",{className:"text-3xl font-bold text-red-600",children:S.filter((e=>e.is_overdue)).length})]}),(0,Rt.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,Rt.jsx)("h3",{className:"text-lg font-semibold text-green-800",children:"Upcoming AMC"}),(0,Rt.jsx)("p",{className:"text-3xl font-bold text-green-600",children:S.filter((e=>!e.is_overdue)).length})]})]}),(0,Rt.jsx)("div",{className:"mb-4",children:(0,Rt.jsx)("input",{type:"text",placeholder:"Search AMC projects by project name, customer name, or type...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:te,onChange:e=>ne(e.target.value)})}),(0,Rt.jsxs)("div",{className:"overflow-x-auto",children:[(0,Rt.jsxs)("table",{className:"w-full table-auto",children:[(0,Rt.jsx)("thead",{children:(0,Rt.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Project"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Customer"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"AMC Amount"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Project End Date"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"AMC Due Date"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Status"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Actions"})]})}),(0,Rt.jsx)("tbody",{children:S.filter((e=>e.project_name.toLowerCase().includes(te.toLowerCase())||e.customer_name.toLowerCase().includes(te.toLowerCase())||e.project_type.toLowerCase().includes(te.toLowerCase()))).map(((e,t)=>(0,Rt.jsxs)("tr",{className:"border-b",children:[(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"font-medium",children:e.project_name}),(0,Rt.jsx)("p",{className:"text-sm text-gray-600",children:e.project_type}),(0,Rt.jsxs)("p",{className:"text-sm text-gray-600",children:["\u20b9",e.project_amount.toLocaleString()]})]})}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"font-medium",children:e.customer_name}),(0,Rt.jsx)("p",{className:"text-sm text-gray-600",children:e.customer_email})]})}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsxs)("p",{className:"font-medium text-green-600",children:["\u20b9",(e.amc_amount||0).toLocaleString()]})}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:new Date(e.project_end_date).toLocaleDateString()}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:new Date(e.amc_due_date).toLocaleDateString()}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsx)("span",{className:"px-2 py-1 rounded text-sm font-medium ".concat(e.is_overdue?"bg-red-100 text-red-800":e.days_until_amc<=7?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.is_overdue?"Overdue by ".concat(Math.abs(e.days_until_amc)," days"):0===e.days_until_amc?"Due Today":"Due in ".concat(e.days_until_amc," days")})}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsxs)("div",{className:"flex space-x-2",children:[(0,Rt.jsx)("button",{onClick:()=>(async e=>{const t=e.amc_amount||0;if(t<=0)return void alert("No AMC amount set for this project. Please update the project with AMC amount.");const n="Record AMC payment of \u20b9".concat(t.toLocaleString()," for project: ").concat(e.project_name,"?");if(window.confirm(n))try{await At.post("".concat(Lt,"/amc-payment/").concat(e.project_id),{project_id:e.project_id,amount:t}),Ne(),je(),Oe(),alert("AMC payment of \u20b9".concat(t.toLocaleString()," recorded successfully! AMC renewed for 1 year."))}catch(r){console.error("Error recording AMC payment:",r),alert("Error recording AMC payment")}})(e),className:"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600",children:"Record Payment"}),(0,Rt.jsx)("a",{href:"tel:".concat(e.customer_phone),className:"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600",title:"Call Customer",children:"\ud83d\udcde"}),(0,Rt.jsx)("a",{href:"mailto:".concat(e.customer_email),className:"bg-purple-500 text-white px-2 py-1 rounded text-sm hover:bg-purple-600",title:"Email Customer",children:"\u2709\ufe0f"})]})})]},t)))})]}),0===S.length&&(0,Rt.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,Rt.jsx)("p",{children:"No AMC renewals due in the next 30 days"})})]})]})}),"ledger"===e&&(0,Rt.jsx)("div",{className:"space-y-6",children:(0,Rt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rt.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Customer Ledger Management"}),(0,Rt.jsx)("p",{className:"text-gray-600 mb-6",children:"Select a customer to view their complete ledger with all transactions"}),(0,Rt.jsx)("div",{className:"overflow-x-auto",children:(0,Rt.jsxs)("table",{className:"w-full table-auto",children:[(0,Rt.jsx)("thead",{children:(0,Rt.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Customer Name"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Email"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Phone"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Outstanding Amount"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Credit Balance"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Actions"})]})}),(0,Rt.jsx)("tbody",{children:x.map((e=>{var t,r;return(0,Rt.jsxs)("tr",{className:"border-b",children:[(0,Rt.jsx)("td",{className:"px-4 py-2 font-medium",children:e.customer_name}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(null===(t=n.find((t=>t.id===e.customer_id)))||void 0===t?void 0:t.email)||"N/A"}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(null===(r=n.find((t=>t.id===e.customer_id)))||void 0===r?void 0:r.phone)||"N/A"}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsxs)("span",{className:"font-medium ".concat(e.outstanding_amount>0?"text-red-600":"text-gray-600"),children:["\u20b9",(e.outstanding_amount||0).toLocaleString()]})}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsxs)("span",{className:"font-medium ".concat(e.credit_balance>0?"text-green-600":"text-gray-600"),children:["\u20b9",(e.credit_balance||0).toLocaleString()]})}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsx)("button",{onClick:()=>Ce(e.customer_id,e.customer_name),className:"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600",children:"View Complete Ledger"})})]},e.customer_id)}))})]})})]})}),V&&(0,Rt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rt.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-hidden mx-4",children:[(0,Rt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Rt.jsxs)("h2",{className:"text-xl font-bold",children:["Customer Ledger - ",null===A||void 0===A?void 0:A.name]}),(0,Rt.jsx)("button",{onClick:()=>$(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),(0,Rt.jsx)("div",{className:"overflow-y-auto max-h-[70vh]",children:L.length>0?(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsxs)("table",{className:"w-full table-auto mb-4",children:[(0,Rt.jsx)("thead",{children:(0,Rt.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Date"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Type"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Amount"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Description"}),(0,Rt.jsx)("th",{className:"px-4 py-2 text-left",children:"Balance"})]})}),(0,Rt.jsx)("tbody",{children:(()=>{const e=(W-1)*K,t=e+K;return L.slice(e,t).map((e=>(0,Rt.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,Rt.jsx)("td",{className:"px-4 py-2",children:new Date(e.date).toLocaleDateString()}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("credit"===e.transaction_type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"credit"===e.transaction_type?"CREDIT":"DEBIT"})}),(0,Rt.jsx)("td",{className:"px-4 py-2",children:(0,Rt.jsxs)("span",{className:"credit"===e.transaction_type?"text-green-600":"text-red-600",children:["credit"===e.transaction_type?"+":"-","\u20b9",e.amount.toLocaleString()]})}),(0,Rt.jsx)("td",{className:"px-4 py-2 text-sm",children:e.description}),(0,Rt.jsx)("td",{className:"px-4 py-2 font-medium",children:(0,Rt.jsxs)("span",{className:e.balance>=0?"text-green-600":"text-red-600",children:["\u20b9",Math.abs(e.balance).toLocaleString(),e.balance>=0?" CR":" DR"]})})]},e.id)))})()})]}),(0,Rt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rt.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",(W-1)*K+1," to ",Math.min(W*K,L.length)," of ",L.length," transactions"]}),(0,Rt.jsxs)("div",{className:"flex space-x-2",children:[(0,Rt.jsx)("button",{onClick:()=>Q((e=>Math.max(e-1,1))),disabled:1===W,className:"px-3 py-1 rounded bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,Rt.jsxs)("span",{className:"px-3 py-1",children:["Page ",W," of ",Math.ceil(L.length/K)]}),(0,Rt.jsx)("button",{onClick:()=>Q((e=>Math.min(e+1,Math.ceil(L.length/K)))),disabled:W>=Math.ceil(L.length/K),className:"px-3 py-1 rounded bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}):(0,Rt.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No transactions found for this customer."})})]})})]})})};l.createRoot(document.getElementById("root")).render((0,Rt.jsx)(a.StrictMode,{children:(0,Rt.jsx)(Ft,{})}))})();
//# sourceMappingURL=main.2afc1eb3.js.map